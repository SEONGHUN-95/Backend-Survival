# DDD(Domain Drvien Design)
## 도메인 주도 개발 시작하기(최범균)를 읽고 정리한 내용.

# 도메인
- 기업이 소프트웨어 영역으로 해결하고자 하는 "문제 영역"을 의미한다. 
- 따라서 이 문제 영역을 해결하고자 하는 개발자와 문제 영역에 대해 잘 알고 있는 도메인 전문가가 유비쿼터스 언어로 지식 탐구를 진행하여 도메인을 더 자세히 알 수 있다.

> 유비쿼터스 언어란? 
> 도메인을 논의할 때 서로 다른 언어를 사용함으로써 오는 의사소통의 오류와 비효율을 막기 위해, 즉 "같은 이야기"를 하기 위해 대화, 도메인, 코드, 테스트 등에서 모두 같은 용어를 사용하는 것을 의미한다. 예컨대 Shipment로 할 것인지 아니면 Delivery로 할 것인지 account(계좌, 회원)은 '회원'의 의미로 쓰자는 등의 합의된 언어를 의미한다.

# 도메인 모델

그렇다면 도메인 모델은 도메인을 해결하기 위해 도메인을 구체화한 내용들의 상관관계를 표현한 것을 의미한다. 도메인 모델을 구현해내기 위해서는 기획서, 사용자 스토리 등을 통해 도메인을 이해하고 도메인 모델의 프로토타입을 설계하는 것을 의미한다.

> ### Entity와 VO 차이?
엔티티는 식별자가 있는 객체로 도메인 모델의 고유한 개념을 표현하며 해당 모델과 관련된 기능을 제공한다.
반면 VO는 식별자가 없고 개념적으로 하나의 값을 표현할 때 사용하며 다른 도메인의 속성이나 다른 VO의 속성으로 사용되곤 한다.

## 애그리거트

동일한 문제 영역을 다루는 도메인 모델끼리 군집화한 것을 말한다. 예컨대 Order 엔티티와 이에 수반되는 Orderer, LineItem, OrderLine 등 함께 묶어 Order를 수행하는 집단(애그리거트)를 형성할 수 있다. 애그리거트에는 해당 모델의 정상적인 작동을 책임지는 애그리거트 루트가 있다. 해당 애그리거트에 접근하기 위해서는 애그리거트 루트를 통해 접근해야 한다.
한 프로그램에는 다수의 애그리거트가 있을 수 있는데 일반적인 도메인 모델로만 프로그램의 큰 그림을 조망하기 어렵고 대신, 애그리거트 단위로 확인하기에 더 용이할 수 있다.
또, 애그리거트 루트의 책임 요소 중 하나는 애그리거트의 일관성을 유지하는 것이다. 애그리거트 루트가 내부 기능을 구현해야 하며 일관성을 유지하기 위해 애그리거트 외부에서 내부의 데이터를 직접 변경하고 업무 규칙을 무시하지 않도록 해야한다. 이를 위해 public setter를 지양하고 value type을 불변으로 설정한다. 또, 한 애그리거트가 다른 애그리거트의 내부를 수정해서는 안된다.

## 리포지터리

@Entity나 @Embeddable이 붙은 클래스는 DB에서 데이터를 꺼내 객체로 저장할 때 기본 생성자를 사용하기 때문에 기본 생성자 만들어야함.


