# Test

소프트웨어 개발에서 테스트란 요구사항과 명세서에 기술된 대로 정확히 작동하는지 확인하기 위해 실시하는 개발 과정을 의미한다. 단위 테스트를 비롯하여 여러 단계의 여러 형태의 테스트가 존재하고 있으며 안전하고 효율적인 개발에 있어서 필수적인 과정이다.

## V 모델

개발 모델의 일종으로 개발 단계별 각 테스트 과정을 병행하는 변형된 폭포수 모델이다. 단계는 요구사항 분석, 시스템 설계, 아키텍처 설계, 모듈 설계, 코딩 등의 과정을 거치며 각 단계에서 인수 테스트, 단위테스트, 시스템 테스트,통합테스트, 단위 테스트를 병행한다.

## 내적 품질(테스트 코드 작성등)을 높이면 좋은 이유

사용자 입장에서 보면 코드의 상태보다 어플리케이션의 겉모습에 와닿는 것이 크다. 하지만 테스트 코드를 작성하며 체계적으로 개발에 진행했을 때에는 사용자에게 보이는 UI나 기능적인 부분은 물론, 유지보수에 큰 이점이 있다. 단기적으로는 작동하는 코드일지라도 품질이 보장되지 않은 코드라면 성능과 유지보수에 치명적일 수 있다. 

## JUnit

JUnit은 자바 언어 단위 테스트 프레임워크로서 개발시 필요한 단위테스트들을 손쉽게 할 수 있는 기능을 제공한다.

## 단위 테스트

단위 테스트는 개발자가 작성한 작은 모듈 단위의 기능이 정상적으로 작동하는지 확인할 수 있는 테스트이다. 단위테스트 단계에서 식별한 에러는 추후 사용자에게 발견되었을 때보다 비용을 크게 아낄 수 있다.

## E2E 테스트

소프트웨어의 전체 시스템을 테스트하는 방법 중 하나로서 사용자 시나리오를 기반으로 테스트를 수행하는 방법이다. 단위 테스트, 통합 테스트 등에서는 식별할 수 없었던 새로운 에러들을 확인할 수 있다.

## 통합 테스트(Integration Test)

통합 테스트는 두 개 이상의 모듈을 통합하여 소프트웨어 동작 전반을 확인할 수 있는 테스트를 의미한다. 

### * SUT

SUT는 SystemUnderTest로 하드웨어, 소프트웨어, 데이터베이스 등 테스트 대상이 되는 시스템을 의미한다.

# Mock, Mocking

Mock 객체는 실제 객체와 유사하게 작동하는, 프로그래머가 직접 작성한 코드로 이루어진 객체를 의미한다. 가짜 객체로서 실제 객체를 불러오기 소요가 큰 객체를 대신하여 테스트 진행 속도를 높여서 안정적인 테스트와 빠른 개발에 도움이 된다.  

Mocking은 테스트 코드에서 외부에 의존성을 가지는 객체나 시스템을 대체하기 위해 사용하는 기술이다. 이를 통해 외부 요소를 호출하는 비용을 아끼고, 의도한 로직에 대한 검증을 명확히 할 수 있다. 

Mocking은 그 자체로서 의미가 있다기보다 진짜 객체를 사용해야하는 부분에 집중할 수 있는 시간을 버는 측면에서 의미가 있다. 따라서 필요에 따라 Mocking을 사용하는 것이 크게 도움이 될 수 있지만 주객이 전도되어서는 안되겠다.

## @SpyBean & @MockBean

Mocking 기능을 지원하는 애너테이션이다. @SpyBean은 기존에 등록된 빈 객체를 Spy 객체로 대체하고 @MockBean은 완전히 새로운 Mock 객체를 생성하여 빈으로 등록한다. 

## MockMvc, @WebMvcTest

MVC 기반 웹 어플리케이션을 테스트할 때 사용되는 클래스, 어노테이션으로 실제 HTTP요청이 없어도 컨트롤러의 검증을 할 수 있는 기능을 가지고 있다. 

# TDD(테스트 주도 설계)

TDD는 실제 기능을 구현하기 전 테스트 코드를 작성한 후 그 테스트를 통과하는 실제 코드를 작성하는 방식의 개발 접근법을 의미한다. 

테스트 작성 -> 테스트 실행 -> 리팩토링의 순서로 끊임없이 이루어진다.
개발자는 코드가 어떻게 동작해야하는지 정의하는 테스트를 먼저 작성 후 테스트를 실행하여 현재 코드를 검증, 실패하면 코드를 테스트가 통과할 수 있게 수정한다. 이후 코드의 기능은 수정하지 않고 구조만 개선하는 리팩토링을 수행한다.

TDD를 통해 코드를 작성하면 테스트 작성 후 바로 피드백을 받을 수 있고 발생할 수 있는 에러를 육안으로 직접 확인 후 수정할 수 있어 개발자 자신감 향상에 도움이 된다. 