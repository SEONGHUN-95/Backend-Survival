# DDD(Domain Driven Design)

DDD란 기업의 비즈니스 도메인 중 소프트웨어에서 해결하고자 하는 문제 도메인을 중심으로 소프트웨어를 설계하는 개발 방법론을 의미한다. 만약 도메인과 관련된 코드가 여러 계층(UI, 응용, 도메인, 영속 등)에 널리 산재되어 있다면 문제 도메인이 변화할 때마다 변화된 내용을 모두 추적해서 보수해야할 것이다. 그 대신 관심사의 분리를 통해 각 계층을 분리하고 특히 도메인 계층에만 업무 개념 및 업무 상황 등을 모두 몰아 넣어 유지보수를 용이하게 할 수 있다.

또한 DDD에서 가장 중요한 것 중 하나는 도메인 모델링이라고 할 수 있다. 도메인 모델링이란 비즈니스 도메인을 소프트웨어의 모델로 추상화하는 작업이다.
DDD는 흔히 전략적 설계와 전술적 설계라는 군(軍)의 은유를 사용하여 표현한다. 전자는 거시적인 관점에서 도메인 설계를 해나가는 과정이고 후자는 전자의 결과를 도출하기 위해 실행하는 소프트웨어 개발 패턴을 의미한다.

전략적 설계부터 알아보자.
도메인 모델링을 할 때 소프트웨어 개발자 혼자서는 부침을 겪게 되곤 한다. 개발자 선에서 적당히 설계를 하게 되면 알지 못했던 부분에서 계속 설계와 코드를 추가하게 되고 이는 결국 기술 부채를 낳게 된다. 따라서 해당 비즈니스의 전문가인 도메인 전문가와의 소통을 통해 도메인 모델을 완성해나가야 한다. 이 때 개발자와 비개발자가 '같은 이야기'를 하기 위해서 언어의 통일이 필요한데 이 것이 보편 언어(Ubiquitous Language)이다. 
보편 언어를 사용하면서 도메인을 설계해나가는 과정을 지식 탐구(Knowledge Crunching)이라고 하며 이것이 완료되면 핵심적인 도메인과 이를 지원하는 지원 도메인 그리고 관련 도메인들을 그룹화한 Bounded Context가 이루어진다.
Bounded Context는 도메인들의 연관성과 중요도를 파악하고 보편 언어를 구체화할 수 있는 것에 의의가 있다.
추가로, Context Mapping이란 각 Bounded Context 간의 상호 관계를 표현한 것이다.

전술적 설계는 전략적 설계를 통해 얻어낸 도메인 모델을 소프트웨어 상에 잘 구현해내기 위한 패턴이다. DDD Lite라고도 표현한다.

Entity

개별 식별자를 통해 식별이 가능한 객체를 의미한다. Entity의 식별자로 동일성(Identity)을 확인할 수 있다.
또한, Entity는 생명 주기가 존재하며 Entity의 필드부터 생성하는 것보다 행위를 위해 필요한 필드들을 추후 선언하는 것이 더 이상적이다. (무작정 필드부터 생성하는 것 자제)

Value Object

Entity와는 달리 식별이 불가능한 불변의 객체를 의미한다. 돈, 주소, 타입 등 값 자체로서 의미가 있는 객체를 의미한다. VO를 통해 동등성(Equality)를 확인할 수 있다.

Aggregate, Aggregate Root

Aggregate은 Entity와 Value Object를 포함하는 도메인의 핵심 개념을 담은 논리적 단위를 의미한다. 따라서 도메인을 사용 목적을 Aggreagate 설계가 중요하다. Root는 Aggregate의 Entry Point를 의미한다. 외부에서 Aggregate의 각 객체에 바로 접촉할 수 있는 것이 아니라 Entry Point를 통해 접촉할 수 있게 된.다

Repository

Repository는 Aggregate, Entity와 데이터베이스 사이의 매개체 역할을 한다. Aggregate 하나에 Repository 하나만 가지고 있는 것이 데이터 일관성 유지에 용이하다. Entity별로 Repository를 갖는 등 Repository가 많아지면 데이터를 조작하는 경로가 많아지고 그에 따라 데이터의 일관성을 유지하는데에 더 많은 신경을 쏟아야 한다.