# CQS(Command Query Separation)

객체의 상태를 반환하는 Query와 객체의 상태를 변경하는 Command에 대한 메서드를 구분하여 사용하는 것을 의미한다. 즉, 상태 변경과 상태 받아오는 메서드는 분리되어야 한다는 것이다. 이는 메서드 별 역할을 분명히 분리하여 복잡한 프로그램에서 혼동을 한 단계 예방하는 차원에서 의미가 있다.

# CQRS

데이터 저장소에 대한 읽기와 업데이트 작업을 구분하는 패턴을 의미한다. 기존에는 동일한 데이터 모델에 대해 데이터 수정과 데이터 쿼리를 구분하지 않고 진행하였다. 하지만 이는 복잡한 애플리케이션에서 읽기와 쓰기의 표현 사이에 불일치를 야기하고, 데이터 저장소 및 데이터 액세스 계층에 가해지는 부하와 쿼리의 복잡성으로 인한 성능 저하 등이 발생하였다. 그로 인해 설계상의 복잡도를 다소 증가시키더라도 쿼리와 업데이트 모델을 구분하여 설계하곤 하였다. 

CQRS를 통해 읽기와 쓰기 워크로드를 독립적으로 확장하고 잠금 경합을 감소시키며, 읽기 쪽과 쓰기 쪽에 각자 최적화된 스키마를 사용할 수 있고, 관심사의 분리를 통해 유연한 모델을 생성할 수 있다. 그러나 CQRS는 적용이 적합한 도메인에서만 적용해야 성능 상의 이점을 얻을 수 있기 때문에 무분별한 적용은 제한되어야 한다.

>잠금 경합이란?
>여러 개의 프로세스나 스레드가 동시에 공유된 리소스에 접근하여 변경을 시도할 때 발생하는 경합 상황을 의미한다. 여러 작업이 동시에 한 리소스를 수정하고자 할 때 잠금 경합이 발생하여 데이터의 일관성과 정확성에 영향을 줄 수 있다.

>SSOT(Single Source Of Truth)
>데이터에 대한 단일성과 일관성을 갖추고 데이터의 중복을 피하기 위해 사용되는 "한 가지 데이터 소스"를 일컫는 것이다. 데이터 요소를 오직 한 곳에서만 제어 및 편집하고 다른 데이터 저장소들은 이를 참조하기만 하기 때문에 시스템 전체에 전파된다.

## View

DB에서 View란 하나 이상의 기본 테이블에서 파생된 쿼리 결과를 나타내는 개체를 의미한다. 여러 테이블 간의 일부 열, 행 그리고 조인 등을 기반으로 정의되어 데이터를 간결하게 표현하고 복잡한 쿼리를 단순화할 수 있다.

## Materialized View

구체화 뷰란 일반 view와 다르게 데이터가 물리적으로 직접 저장되고 주기적으로 동기화하여 읽기 성능을 향상시키기 위해 생성된 view를 의미한다. 쿼리에 필요한 데이터만을 포함하는 구체화 뷰를 사용하면 필요한 정보만을 빠르게 가져올 수 있어 성능 향상에 도움이 될 수 있다. 

## OLTP(Online Transaction Processing), OLAP(Online Analytical Processing)

온라인 데이터 처리 시스템을 의미한다. OLTP는 온라인 뱅킹, 메시지 전송 등 동시에 발생하는 다수의 트랜잭션을 실행하는 데이터 처리 유형을 의미한다. OLAP는 대규모 데이터 집합을 다차원으로 "분석"하는 데이터 처리 방법으로, 의사 결정 시스템에 필요한 양질의 데이터 추출에 주로 사용되는 데이터 처리 유형을 의미한다. OLTP는 주로 실시간 트랜잭션 처리와 데이터의 정확성을 강조하고 OLAP는 대규모 데이터 분석 및 의사 결정 지원이 더 중요하다.

## Event Sourcing

시스템의 상태 변화를 이벤트로 기록하고 저장하는 방식으로, DB에 변경된 최종 상태를 저장하는 대신 시스템의 모든 상태 변화를 이벤트로 저장한다. 이렇게 되면 언제든지 이벤트를 재생산하여 시스템의 상태를 얻을 수 있게 된다. 

저장소에서 데이터를 읽고 수정하고 잠그는 트랜잭션을 사용했던 기존의 CRUD 접근 방식은 데이터 업데이트 충돌을 발생시키거나, 업데이트 작업을 수행할 때 성능이 저하될 수도 있었다.

이벤트 소싱 패턴은 애플리케이션 코드가 각 데이터에서 수행된 작업들을 의미하는 이벤트들을 이벤트 저장소에 보내어 저장한다. 애플리케이션에서 이벤트 기록을 불러올 수 있으며 이 기록을 통해 관련된 이벤트들을 재생하고 사용하여 엔터티의 현재 상태를 구체화할 수 있다.

하지만 이벤트 소싱은 모든 상태 변화를 이벤트로 저장하기 때문에 DB의 크기가 커지고 일부 상황에서는 더 복잡한 상황을 야기할 수 있어 필요한 상황에 적절히 사용하는 것이 필요하다.

# Redis

Redis는 REmote Dictionary Server의 약자로 인메모리 데이터 저장소이다. 메모리에서 저장되기 때문에 빠른 읽기와 쓰기가 가능하고, String, Hash, List, Set 등 다양한 데이터 구조를 저장하여 활용할 수 있다. 또한, 메모리에 저장되나 AOF, RDB 등에도 저장할 수 있어 필요에 따라 안정적인 데이터 저장을 보장한다. 또한 사용자마다 스케일 아웃, HA, 샤딩 기능의 필요에 따라 원하는대로 아키텍처를 구성함으로써 유연하게 설계가 가능하다.


> NoSQL(Not Only SQL)이란?
>RDB가 아닌 다른 형태의 DB를 의미한다. 다양한 데이터 모델과 저장 방식을 제공하며 대량의 분산 데이터를 처리하고 확장성을 제공하기 위해 설계되었다. 기존의 틀에서 벗어나 key-vale, Document 등의 다양한 데이터 모델을 제공하고, 유연한 스키마를 갖고 있으며 빠른 읽기/쓰기 성능을 자랑한다.




